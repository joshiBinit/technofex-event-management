<div class="p-4">
  <div class="flex justify-between items-center mb-4">
    <h1 class="text-2xl font-bold mb-4">Event List</h1>
    @if ((role$ | async) === 'admin') {
    <button
      mat-raised-button
      color="accent"
      class="rounded-lg"
      (click)="onAddEvent()"
    >
      + Add New Event
    </button>
    }
  </div>

  @if (loading$ | async) {
  <p class="text-gray-600">Loading events...</p>
  }

  <div class="overflow-x-auto">
    <table
      mat-table
      [dataSource]="(events$ | async) || []"
      class="mat-elevation-z4 w-full rounded-lg overflow-hidden"
    >
      <!-- Title Column -->
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2">Title</th>
        <td mat-cell *matCellDef="let event" class="px-4 py-2">
          {{ event.title }}
        </td>
      </ng-container>

      <!-- Category Column -->
      <ng-container matColumnDef="category">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2">Category</th>
        <td mat-cell *matCellDef="let event" class="px-4 py-2">
          {{ event.category }}
        </td>
      </ng-container>

      <!-- Date Column -->
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2">Date</th>
        <td mat-cell *matCellDef="let event" class="px-4 py-2">
          {{ event.date }} {{ event.time }}
        </td>
      </ng-container>

      <!-- Location Column -->
      <ng-container matColumnDef="location">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2">Location</th>
        <td mat-cell *matCellDef="let event" class="px-4 py-2">
          {{ event.location }}
        </td>
      </ng-container>

      <!-- Tickets Column -->
      <ng-container matColumnDef="tickets">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2">Tickets</th>
        <td mat-cell *matCellDef="let event" class="px-4 py-2">
          {{ event.totalTickets }}
        </td>
      </ng-container>

      <!-- Price Column -->
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2">Price</th>
        <td mat-cell *matCellDef="let event" class="px-4 py-2">
          ${{ event.price }}
        </td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="px-4 py-2">Actions</th>
        <td mat-cell *matCellDef="let event" class="px-4 py-2">
          <button
            mat-raised-button
            color="primary"
            class="rounded-lg"
            (click)="onBookNow()"
          >
            Book Now
          </button>
        </td>
      </ng-container>

      <!-- Header and Row Declarations -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</div>
